<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Css 盒子模型</title>
</head>
<style type="text/css">
 * {
     margin: 0 ;
     padding: 0
    }
body {
    width: 100vw;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    }
.container {

    width: 400px;
    background-color: blue;
}
.green {
    width: calc(50%  - 100px);
    background-color: green;
    display: list-item;
    height:400px;
}
.yellow {
    width:300px;
    height:400px;
    margin:-400px 0 0 100px;
    background-color: yellow;
}

#e{
            width: 100px;
            height: 100px;
            background: red;
            position: absolute;
            left: 0;
            top: 100px;
            zoom: 1;
        }
</style>
<body>
    <div class="container">
        <div class="green"></div>
        <div class="yellow"></div>
    </div>
    <div id="e"></div>
    <div id="some-element-you-want-to-animate"></div>
    <div id="btn">按钮</div>
<script>
    //cross
    const xhr = new XMLHttpRequest();
    document.cookie = "username = Jack";
    xhr.withCredentials = true
    xhr.open('put','http://localhost:4000/getData',true);
    xhr.setRequestHeader('username','Jack');
    xhr.onreadystatechange = function(){
        if(xhr.readyState === 4){
            if(xhr.status >= 200 && xhr.status< 300 || xhr.status === 304 ) {
                console.log(xhr.response)
                console.log(xhr.getResponseHeader('username'))
            }
        }
    }
    xhr.send()
    // var e = document.getElementById("e");
    // var flag = true;
    // var left = 0;

    // function render(){
    //     if(flag){
    //         if(left > 100){
    //             flag = false
    //         }
    //         e.style.left = `${left++}px`
    //         // window.requestAnimationFrame(render);
    //     }else{
    //         if(left <= 0 ){
    //             flag = true
    //         }
    //         e.style.left = `${left--}px`
    //         // window.requestAnimationFrame(render);
    //     }
    // }

    // console.log(e.getBoundingClientRect())
    // async function foo() {
    //     console.log(1)
    //     // return Promise.resolve(3)
    //     //throw '失败'
    //     Promise.reject('失败')
    // }
    // foo().catch(console.log)
    // console.log(2)

    // async function baz() {
    //     const thenable = {
    //         then(callback) {
    //             callback('baz')
    //         }
    //     }
    //     return thenable
    // }
    // baz().then(console.log)


    // async function foo() { 
    //     // let p = new Promise((resolve, reject) => setTimeout(resolve,1000,3))
    //     // return await p
    //     console.log(1)
    //     // await (() => { throw '失败'} )()
    //    /// await Promise.reject(3);
    //     console.log(4)
    // }
    // foo().catch(console.log) 
    // console.log(2)



//     let arr = [10,20,1,5,9,28];
//    let newArr =  arr.filter(item=> {
//         return item >10
//     })
//     console.log('newArr',newArr)
//     console.log('arr',arr)
//     let newArr2 = arr.filter(item => {
//         return item > 3
//     })
//     let newArr3 = arr.forEach((item,index) => {
//         console.log(item ,index)
//     })
    // console.log(newArr)
    // console.log(newArr2)

    // let newArr4 = arr.sort((a,b) => {
  
    //     if(a>b){
    //         return 1
    //     }
    //     if(a<b){
    //         return -1
    //     }
    //     return 0
    // })

    // console.log(newArr4)
  


    //  let newArr5 = arr.every(item => {
    //     return item > 0
    //  })
    // //  console.log(newArr5)

    //  let newArr6 = arr.reduce((prev,current)=>{
    //     return prev + current 
    //  })
    //  console.log(newArr6)

    //  let newArr7 = arr.findIndex(item => {
    //     return item > 10
    //  })
    //  console.log(newArr7)

    //  const btn = document.getElementById('btn');
    //  btn.addEventListener('click',function(){
    //     const xmlReq = new XMLHttpRequest();
    //  xmlReq.open('post','http://127.0.0.1:5500/')
    //  xmlReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    //  xmlReq.send('user=is_sweet&pwd=123456')
    //  xmlReq.onreadystatechange = function(){
    //     console.log(xmlReq)
    //  }
    //  })


    //  function jsonp({url,params,callback}){
    //     return new Promise((resolve, reject)=> {
    //         var script = document.createElement('script');
    //         window[callback] = function(data){
    //             resolve(data);
    //           document.body.removeChild(script);
    //         }
    //         params = {...params,callback};
    //         let arrs = []; 
    //         for(let key in params){
    //             arrs.push(`${key}=${params[key]}`)
    //         }
    //         console.log(arrs)
    //         script.setAttribute("type","text/javascript");
    //         script.src = `${url}?${arrs.join('&')}`;
    //         document.body.appendChild(script)
    //     })
    //  }

    // jsonp({
    //     url:'http://localhost:3000/say',
    //     params:{username : 'shazi'},
    //     callback: 'show'
    // }).then((data)=>{
    //     console.log(data)
    // })

   

    // render()

    // (function foo(){
    //     render()
    //     window.requestAnimationFrame(foo);
    // })()
    // setInterval(()=>render(),1000/60)
   
// function Foo() {
//      getName = function() {
//     console.log(1);
//   };
//   this.getName = function() { console.log(88)}
//   return this;
// }
// Foo.getName = function() {
//     console.log(2);
// };
// Foo.prototype.getName = function() {
//     console.log(3);
// };
// var getName = function() {
//     console.log(4);
// };
// function getName() {
//     console.log(5);
// }


// let foo = new Foo();
// console.log(Object.getPrototypeOf(foo) === Foo.prototype)
// console.log(Object.getPrototypeOf(foo) === foo.__proto__)



// new Foo().getName()
// new new Foo().getName()

// //请写出以下输出结果：
// Foo.getName();   //2  //构造函数下的getName
// getName();   //4  //var 定义的getName 函数声明变量提升
// Foo().getName();  //1  //相当于window.getName()
// getName();  //1
// new Foo.getName();  //2 new 关键字会执行构造函数，Foo.getName()
// new Foo().getName();  //3   
// new new Foo().getName();   //3


// function Person() {
// }
// Person.prototype.name = "小明";
 
 
// person1 = new Person();
// person1.constructor.prototype.name = "小花";
// console.log(Person.prototype.name, person1.constructor === Person);// 小花 true
 
// person1 = {//这里已经属于重写构造函数了
// 	getName: function(){
// 		console.log("获取姓名");
// 	}
// }
// console.log(Person.prototype.name, person1.constructor === Person, person1.constructor === Object);

// let p1 = new Promise((resolve,reject)=>{
//     resolve('成功');
//     reject('失败')
// });
// console.log('p1',p1)

// class MyPromise {
//     constructor(executor){
//         this.initValue();
//         this.initBind();
//         try{
//         executor(this.resolve,this.reject)
//         }catch(e){
//         this.reject(e)
//         }
//         this.onFulfilledCallback = [];
//         this.onFailedCallback = [];
//     }
//     initBind(){
//         this.resolve  = this.resolve.bind(this);
//         this.reject = this.reject.bind(this)
//     }

//     initValue(){
//         this.PromiseResult = ''
//         this.PromiseState = 'pedding'
//     }

//     resolve(value){
//         if(this.PromiseState !== 'pedding') return
//         this.PromiseState = 'fulfilled'
//         this.PromiseResult = value
//         while(this.onFulfilledCallback.length){
//             this.onFulfilledCallback.shift()(this.PromiseResult)
//         }
       
//     }

//     reject(reasons){
//         if(this.PromiseState !== 'pedding') return
//         this.PromiseResult = reasons;
//         this.PromiseState = 'Failed'
//         while(this.onFailedCallback.length){
//             this.onFailedCallback.shift()(this.PromiseResult)
//         }
//     }
//     static race(promises){
//         return new MyPromise((resolve,reject)=> {
//             promises.forEach(promise => {
//                 if(promise instanceof MyPromise){
//                     promise.then(res => {
//                         resolve(res)
//                     },err => {
//                         reject(err)
//                     })
//                 }else{
//                     resolve(promise)
//                 }
//             } )
//         })
//     }

//     static all(){}

//     static allSettled(){}

//     then(onFulfilled, onRejected){
//         var thenPromise = new MyPromise((resolve, reject)=>{
//             const resolvePromise = cb => {
//                 const x = cb(this.PromiseResult)
//                 try{
//                     if(x === MyPromise){
//                         throw new Error('不能返回自身')
//                     }
//                     if(x instanceof MyPromise){
//                         x.then(resolve, reject)
//                     }else{
//                         resolve(x)
//                     }
//                 }catch(e){
//                     reject(e)
//                     throw new Error(e)
//                 }
//             }
//         })
//         onFulfilled = typeof onFulfilled === 'function' ? onFulfilled :  val => val;
//         onRejected = typeof onRejected === 'function' ? onRejected : reason => {throw reason}
//         if(this.PromiseState === 'fulfilled'){
//             onFulfilled(this.PromiseResult)
//         }else if(this.PromiseState === 'Failed'){
//             onRejected(this.PromiseResult)
//         }else if(this.PromiseState === 'pedding'){
//             this.onFulfilledCallback.push(onFulfilled.bind(this))
//             this.onFailedCallback.push(onFulfilled.bind(this))
//         }
//        return  thenPromise
//     }
   
// }

// let p1 = new MyPromise((resolve,reject)=>{
//     setTimeout( ()=> reject(100),2000)
  
  
// }).then(res => console.log(2 * res), err => console.log(err)).then(res=> console.log(3 * res),err => console.log(err))

// p1
// console.log(4)
// const promise1 = new Promise((resolve, reject) => {
//   setTimeout(resolve, 500, 'one');
// });

// const promise2 = new Promise((resolve, reject) => {
//   setTimeout(resolve, 1000, 'two');
// });
// MyPromise.race([promise1,promise2]).then(value=>{
//     console.log(value)
// }
//     )

//     Promise.race([promise1, promise2]).then((value) => {
//   console.log(value);
//   // Both resolve, but promise2 is faster
// });
// try{
//     throw new Error('foo')
// }catch(e){
//     console.log(e)
// }

// try{
//     Promise.reject(new Error('bar'))
// }catch(e){
//     console.log(e)
// }

// let p = Promise.reject(3);
// setTimeout(console.log,1000,'失败1')

// let onRejected = function(){
//     setTimeout(console.log,2000,'rejected')
// }
// Promise.reject().then(null,onRejected).catch(onRejected)


// let p1 = new Promise((resolve,reject)=>setTimeout(resolve,2000));
// let p2 = new Promise((resolve,reject)=>setTimeout(reject,2000));
// p1.then(()=>{console.log(123)},1)
// p2.then(null,()=>onRejected())

// let p3 = new Promise(()=>{});
// let p4 = p3.then();
// let p5 = p3.then(new Promise(()=>{}))
// let p6 = p3.then(Promise.reject('哈哈哈，又失败了'));
// let p7 = Promise.reject().then(null,() => { throw 'bar' })
// let p8 = Promise.reject().then(null,onRejected);
// let p9 = Promise.reject().catch(onRejected)
// console.log('p5',p5)
// console.log('p7',p7)
// console.log('p8',p8)
// console.log('p9',p9)

// let p10 = p3.finally(()=>new Promise(()=>{}));
// let p11 = p3.finally(()=> Promise.reject())
// console.log('p10',p10)
// console.log('p11',p11)
// let p1 = new Promise((resolve,reject) => {
//    resolve('p1 成功')
//     //reject('p1 失败')
// })
// let p2 = new Promise((resolve, reject) => {
//      //resolve('p2 成功')
//      reject('p2 失败')
// })

// Promise.any([p2,p1]).then(function(values){
//     console.log(values)
// })

// Promise.all([p1,p2]).then(function(values){
//     console.log(values)
// })


</script>
</body>
</html>